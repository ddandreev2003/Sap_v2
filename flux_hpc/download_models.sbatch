#!/bin/bash
#SBATCH --job-name=flux_download_models  # –ù–∞–∑–≤–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
#SBATCH --error=runs/download-%j.err     # –§–∞–π–ª –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–æ–∫
#SBATCH --output=runs/download-%j.log    # –§–∞–π–ª –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
#SBATCH --cpus-per-task=4                # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ CPU —è–¥–µ—Ä (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ –Ω—É–∂–µ–Ω GPU)
#SBATCH --time=1:00:00                   # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è Python
module load Python/Anaconda_v03.2023

# –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω—É–∂–Ω–æ–≥–æ
source deactivate
source activate flux_env

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —Å–∫—Ä–∏–ø—Ç–æ–º
cd /path/to/SAP/flux_hpc

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∑–æ–Ω–µ
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ 25GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
python3 01_download_models.py --output_dir ./models

echo "‚úÖ –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!"
echo "üìÇ –ú–æ–¥–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤: ./models/flux_dev"
