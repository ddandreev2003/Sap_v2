# üöÄ FLUX HPC - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å FLUX –Ω–∞ HPC –∫–ª–∞—Å—Ç–µ—Ä–µ.

## ‚ö° –ó–∞ 5 –º–∏–Ω—É—Ç –¥–æ –ø–µ—Ä–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### 1. –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º):

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
conda create -n flux_env python=3.10
conda activate flux_env
pip install -r requirements.txt

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å –û–î–ò–ù –†–ê–ó (25GB)
python3 01_download_models.py --output_dir ./models

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
python3 utils.py --check-env
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã:

```bash
# –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
python3 utils.py --create-template prompts.json
# ... –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å prompts.json ...

# –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
python3 utils.py --validate-prompts prompts.json
```

### 3. –ù–∞ HPC –∫–ª–∞—Å—Ç–µ—Ä–µ:

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
scp -r models/ username@hpc:/path/to/project/flux_hpc/
scp prompts.json username@hpc:/path/to/project/flux_hpc/

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
ssh username@hpc

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
cd /path/to/project/flux_hpc
bash setup_directories.sh

# **–û–¢–†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨ –ü–£–¢–ò –í script.sbatch**

# –ó–∞–ø—É—Å—Ç–∏—Ç—å!
sbatch script.sbatch

# –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å
tail -f runs/flux-*.log
```

**–ì–æ—Ç–æ–≤–æ! ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç –≤ `results/`**

---

## üìÇ –ß—Ç–æ –≤ –ø–∞–ø–∫–µ?

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `01_download_models.py` | –ó–∞–≥—Ä—É–∑–∫–∞ FLUX (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∑–æ–Ω–∞) |
| `02_generate_images.py` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (HPC) |
| `script.sbatch` | SLURM —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ |
| `download_models.sbatch` | SLURM –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π |
| `prompts.json` | –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ |
| `prompts_detailed.json` | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä |
| `requirements.txt` | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
| `utils.py` | –£—Ç–∏–ª–∏—Ç—ã |
| `SETUP_GUIDE.md` | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |

---

## üéØ –ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è?

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞:
- ‚úÖ **2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ë–ï–ó –ø–æ–¥—Å–∫–∞–∑–æ–∫** (–±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç)
- ‚úÖ **5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –° –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏** (–ø—Ä–æ–º–ø—Ç + —Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏)

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
results/
‚îú‚îÄ‚îÄ cyberpunk_city/
‚îÇ   ‚îú‚îÄ‚îÄ without_hints/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ img_0000.png
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ img_0001.png
‚îÇ   ‚îú‚îÄ‚îÄ with_hints/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ img_hint_0000.png ... img_hint_0004.png
‚îÇ   ‚îî‚îÄ‚îÄ metadata.json
```

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ script.sbatch:
python3 02_generate_images.py \
    --model_path /path/to/models/flux_dev    # –ü—É—Ç—å –∫ –º–æ–¥–µ–ª–∏
    --prompts_file ./prompts.json             # JSON —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
    --num_without_hints 2                     # –ë–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫
    --num_with_hints 5                        # –° –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
    --height 1024 --width 1024                # –†–∞–∑–º–µ—Ä
    --seed_base 42                            # –ù–∞—á–∞–ª—å–Ω—ã–π seed
```

---

## üìä –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è

| GPU | 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ | 3 –ø—Ä–æ–º–ø—Ç–∞ (21 —à—Ç) |
|-----|---|---|
| V100 | 15-30 —Å–µ–∫ | 5-10 –º–∏–Ω—É—Ç |
| A100 | 5-10 —Å–µ–∫ | 2-3 –º–∏–Ω—É—Ç—ã |

---

## ‚ùå –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 utils.py --check-env

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã
python3 utils.py --validate-prompts prompts.json

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç–∏ (–∞–±—Å–æ–ª—é—Ç–Ω—ã–µ!)
cat script.sbatch | grep "path"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ HPC
cat runs/flux-JOBID.log

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ HPC
ls -la models/flux_dev/
```

---

## üìö –î–∞–ª—å—à–µ

üëâ –ß–∏—Ç–∞–π—Ç–µ [SETUP_GUIDE.md](SETUP_GUIDE.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

üëâ –ß–∏—Ç–∞–π—Ç–µ [README.md](README.md) –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π

---

## üé® –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

```json
{
  "landscape": {
    "text": "A breathtaking landscape with mountains, forests and a lake at sunset",
    "hints": [
      "warm golden hour lighting, peaceful atmosphere",
      "dramatic storm clouds overhead",
      "detailed natural textures and elements",
      "impressionist painting style",
      "minimalist composition with simple forms"
    ]
  }
}
```

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª–æ–≥–æ** - –∑–∞–ø—É—Å—Ç–∏—Ç–µ 1-2 –ø—Ä–æ–º–ø—Ç–∞, –ø–æ—Ç–æ–º —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã** - –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–µ => –ª—É—á—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **–†–∞–∑–Ω—ã–µ seeds** - –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è seeds
4. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ª–æ–≥–∏** - –Ω—É–∂–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º
5. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - —Ç–∞–º –ª–µ–∂–∏—Ç –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
python3 01_download_models.py --output_dir ./models

# –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã
python3 utils.py --validate-prompts prompts.json

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ HPC
sbatch script.sbatch

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
squeue -u $USER

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f runs/flux-*.log

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
scp -r username@hpc:/path/to/results ./
```

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ! –£–¥–∞—á–∏! üéâ**
