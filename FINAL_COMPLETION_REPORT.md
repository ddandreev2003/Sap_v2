# ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û: Combined FLUX + SAP Pipeline

## üéâ –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä–∞—è –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç:

### ‚ú® –î–≤–∞ —Ä–µ–∂–∏–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

1. **Direct FLUX** üé®
   - –ü—Ä—è–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å FLUX 1.dev
   - –ë—ã—Å—Ç—Ä–æ (1-2 –º–∏–Ω –Ω–∞ –ø—Ä–æ–º—Ç)
   - –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
   - –ù–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ LLM

2. **SAP FLUX** üß†
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å LLM-based –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π –ø—Ä–æ–º—Ç–æ–≤
   - –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (2-5 –º–∏–Ω –Ω–∞ –ø—Ä–æ–º—Ç)
   - –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPT –∏ Zephyr

---

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### üîß 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Python
- ‚úÖ `combined_flux_sap.py` (17 KB) - –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ `quick_launch.py` (5.7 KB) - –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
- ‚úÖ `compare_results.py` (16 KB) - –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ `check_environment.py` (14 KB) - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `examples.py` (9.2 KB) - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üìã 2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞
- ‚úÖ `config.json` (4.8 KB) - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ `prompts.txt` (633 B) - –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º—Ç–æ–≤

### üìö 8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (70 KB)
- ‚úÖ `00_START_HERE.md` ‚≠ê **–ì–õ–ê–í–ù–´–ô –§–ê–ô–õ**
- ‚úÖ `QUICKSTART.md` üöÄ **–ë–´–°–¢–†–´–ô –°–¢–ê–†–¢**
- ‚úÖ `COMBINED_FLUX_SAP_README.md` üìñ **–ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø**
- ‚úÖ `COMPONENT_SUMMARY.md` üìã **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò**
- ‚úÖ `NEW_FEATURES_SUMMARY.md` **–ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï**
- ‚úÖ `FILES_MANIFEST.md` **–°–ü–ò–°–û–ö –í–°–ï–• –§–ê–ô–õ–û–í**
- ‚úÖ `install_and_start.sh` üöÄ **INSTALLER –°–ö–†–ò–ü–¢**
- ‚úÖ `README.md` (–æ–±–Ω–æ–≤–ª–µ–Ω) **–ì–õ–ê–í–ù–´–ô README**

### üìä –ò—Ç–æ–≥–æ
- **16 –Ω–æ–≤—ã—Ö/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**
- **~120 KB –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å (–∑–∞ 3 —à–∞–≥–∞)

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python check_environment.py
```

### –®–∞–≥ 2: –ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (10-20 –º–∏–Ω—É—Ç)
```bash
python quick_launch.py --preset compare
```

### –®–∞–≥ 3: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```bash
# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤: results_combined/batch_YYYYMMDD_HHMMSS/
# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å HTML –≥–∞–ª–µ—Ä–µ—é:
python compare_results.py --batch-dir results_combined/batch_*/batch_* --all
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–ø–æ—Ä—è–¥–æ–∫ —á—Ç–µ–Ω–∏—è)

1. **00_START_HERE.md** (3 –º–∏–Ω) ‚≠ê **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û**
2. **QUICKSTART.md** (5 –º–∏–Ω) üöÄ **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**
3. **COMBINED_FLUX_SAP_README.md** (15 –º–∏–Ω) üìñ **–î–õ–Ø –ü–û–õ–ù–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ò**
4. **COMPONENT_SUMMARY.md** (10 –º–∏–Ω) üìã **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò**

---

## üí° –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python check_environment.py

# –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ Direct vs SAP
python quick_launch.py --preset compare

# –¢–æ–ª—å–∫–æ Direct (–±—ã—Å—Ç—Ä–æ)
python quick_launch.py --preset direct-fast

# –¢–æ–ª—å–∫–æ SAP —Å GPT (–∫–∞—á–µ—Å—Ç–≤–æ)
export OPENAI_API_KEY="sk-..."
python quick_launch.py --preset sap-quality

# –õ–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ API
python quick_launch.py --preset local-zephyr

# –ö–∞—Å—Ç–æ–º–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
python combined_flux_sap.py --prompts-file prompts.txt --mode both

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
python compare_results.py --batch-dir results_combined/batch_*/batch_* --all

# –ü—Ä–∏–º–µ—Ä—ã
python examples.py --list
python examples.py --show 2_quick_compare
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```
results_combined/
‚îî‚îÄ‚îÄ batch_20240130_143022/
    ‚îú‚îÄ‚îÄ direct_flux/
    ‚îÇ   ‚îú‚îÄ‚îÄ prompt_1/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ direct_seed_30498.png
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ direct_seed_40123.png
    ‚îÇ   ‚îî‚îÄ‚îÄ metadata.txt
    ‚îú‚îÄ‚îÄ sap_flux/
    ‚îÇ   ‚îú‚îÄ‚îÄ prompt_1/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sap_seed_30498.png
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sap_seed_40123.png
    ‚îÇ   ‚îî‚îÄ‚îÄ metadata.txt
    ‚îî‚îÄ‚îÄ gallery/
        ‚îú‚îÄ‚îÄ comparison.html (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è)
        ‚îî‚îÄ‚îÄ comparison_report.txt (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç)
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
- –î–≤—É—Ö—Ä–µ–∂–∏–º–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (Direct + SAP)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–º—Ç–æ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ seeds
- GPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### ‚úÖ –ê–Ω–∞–ª–∏–∑
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã
- HTML –≥–∞–ª–µ—Ä–µ—è –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Direct vs SAP

### ‚úÖ –£–¥–æ–±—Å—Ç–≤–æ
- –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ú–∏–Ω–∏–º—É–º | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
|-----------|---------|---------------|
| Python | 3.9+ | 3.10+ |
| GPU VRAM | 16GB | 24GB+ |
| RAM | 32GB | 64GB+ |
| –•—Ä–∞–Ω–∏–ª–∏—â–µ | 50GB | 100GB+ |
| CUDA | 11.8+ | 12.0+ |

---

## üîë API –∫–ª—é—á–∏

### –î–ª—è GPT —Ä–µ–∂–∏–º–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
export OPENAI_API_KEY="sk-your-api-key"
```

### –î–ª—è HuggingFace (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
huggingface-cli login
```

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Direct FLUX | SAP FLUX |
|----------|------------|---------|
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚ö°‚ö°‚ö° | ‚ö°‚ö° |
| –ö–∞—á–µ—Å—Ç–≤–æ | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –¢—Ä–µ–±—É–µ—Ç LLM | –ù–µ—Ç | –î–∞ |
| –¢—Ä–µ–±—É–µ—Ç API | –ù–µ—Ç | –¢–æ–ª—å–∫–æ GPT |
| –õ—É—á—à–µ –¥–ª—è | –ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è | –§–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |

---

## üé® –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (10-20 –º–∏–Ω)
```bash
python quick_launch.py --preset compare
```

### 2. –¢–æ–ª—å–∫–æ Direct –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (5-10 –º–∏–Ω)
```bash
python quick_launch.py --preset direct-fast
```

### 3. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å SAP (20-40 –º–∏–Ω)
```bash
export OPENAI_API_KEY="sk-..."
python quick_launch.py --preset sap-quality
```

### 4. –õ–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ API (20-40 –º–∏–Ω)
```bash
python quick_launch.py --preset local-zephyr
```

---

## üÜò –ü–æ–º–æ—â—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python check_environment.py
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
python examples.py --list
python examples.py --show all
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ù–∞—á–Ω–∏—Ç–µ —Å: `00_START_HERE.md`
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: `QUICKSTART.md`
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `COMBINED_FLUX_SAP_README.md`

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- –ü—Ä–∏–º–µ—Ä—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- GPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

### –ö–∞—á–µ—Å—Ç–≤–æ
- –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ seeds
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Å—Å—ã–ª–∫–∏

### –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- –°—Ç–∞—Ç—å—è: https://arxiv.org/abs/2506.01929
- –ü—Ä–æ–µ–∫—Ç: https://tdpc2025.github.io/SAP/

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏
- FLUX 1.dev: https://huggingface.co/black-forest-labs/FLUX.1-dev
- Zephyr 7B: https://huggingface.co/HuggingFaceH4/zephyr-7b-beta

---

## üìù –í–µ—Ä—Å–∏—è

- **–í–µ—Ä—Å–∏—è**: 1.0
- **–î–∞—Ç–∞**: 2024-01-30
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

---

## üéâ –ù–∞—á–Ω–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
cd /home/andrn/Image_Gen_Test2/SAP
python check_environment.py
python quick_launch.py --preset compare
```

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üé®**

---

**P.S.** –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ `00_START_HERE.md` 
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python examples.py --list`
3. –°–º–æ—Ç—Ä–∏—Ç–µ `QUICKSTART.md` –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ
